{"version":3,"file":"index21.js","sources":["../../icons/src/Brush.svelte","../../icons/src/Color.svelte","../../icons/src/Sketch.svelte","../../image/src/Cropper.svelte","../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/Point.js","../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyPoint.js","../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyBrush.js","../../image/src/Sketch.svelte","../../image/src/ModifySketch.svelte","../../image/src/SketchSettings.svelte","../../image/src/Image.svelte","../../image/src/StaticImage.svelte","../../app/src/components/Image/Image.svelte","../../app/src/components/Image/index.ts"],"sourcesContent":["<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\"\n\t><path\n\t\td=\"M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z\"\n\t\tfill=\"currentColor\"\n\t/><path\n\t\td=\"M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z\"\n\t\tfill=\"currentColor\"\n\t/></svg\n>\n","<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\"\n\t><circle cx=\"10\" cy=\"12\" r=\"2\" fill=\"currentColor\" /><circle\n\t\tcx=\"16\"\n\t\tcy=\"9\"\n\t\tr=\"2\"\n\t\tfill=\"currentColor\"\n\t/><circle cx=\"22\" cy=\"12\" r=\"2\" fill=\"currentColor\" /><circle\n\t\tcx=\"23\"\n\t\tcy=\"18\"\n\t\tr=\"2\"\n\t\tfill=\"currentColor\"\n\t/><circle cx=\"19\" cy=\"23\" r=\"2\" fill=\"currentColor\" /><path\n\t\tfill=\"currentColor\"\n\t\td=\"M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-edit-2\"\n\t><path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\" /></svg\n>\n","<script lang=\"ts\">\n\timport Cropper from \"cropperjs\";\n\timport { onMount, createEventDispatcher } from \"svelte\";\n\n\texport let image: string;\n\tlet el: HTMLImageElement;\n\n\tconst dispatch = createEventDispatcher();\n\n\tonMount(() => {\n\t\tconst cropper = new Cropper(el, {\n\t\t\tautoCropArea: 1,\n\t\t\tcropend() {\n\t\t\t\tconst image_data = cropper.getCroppedCanvas().toDataURL();\n\t\t\t\tdispatch(\"crop\", image_data);\n\t\t\t}\n\t\t});\n\n\t\tdispatch(\"crop\", image);\n\n\t\treturn () => {\n\t\t\tcropper.destroy();\n\t\t};\n\t});\n</script>\n\n<img src={image} bind:this={el} alt=\"\" />\n","class Point {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport default Point\n","import Point from './Point'\n\nclass LazyPoint extends Point {\n  /**\n   * Update the x and y values\n   *\n   * @param {Point} point\n   */\n  update (point) {\n    this.x = point.x\n    this.y = point.y\n  }\n\n  /**\n   * Move the point to another position using an angle and distance\n   *\n   * @param {number} angle The angle in radians\n   * @param {number} distance How much the point should be moved\n   */\n  moveByAngle (angle, distance) {\n    // Rotate the angle based on the browser coordinate system ([0,0] in the top left)\n    const angleRotated = angle + (Math.PI / 2)\n\n    this.x = this.x + (Math.sin(angleRotated) * distance),\n    this.y = this.y - (Math.cos(angleRotated) * distance)\n  }\n\n  /**\n   * Check if this point is the same as another point\n   *\n   * @param {Point} point\n   * @returns {boolean}\n   */\n  equalsTo (point) {\n    return this.x === point.x && this.y === point.y\n  }\n\n  /**\n   * Get the difference for x and y axis to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDifferenceTo (point) {\n    return new Point(this.x - point.x, this.y - point.y)\n  }\n\n  /**\n   * Calculate distance to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDistanceTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.sqrt(Math.pow(diff.x, 2) + Math.pow(diff.y, 2))\n  }\n\n  /**\n   * Calculate the angle to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getAngleTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.atan2(diff.y, diff.x)\n  }\n\n  /**\n   * Return a simple object with x and y properties\n   *\n   * @returns {object}\n   */\n  toObject () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  }\n}\n\nexport default LazyPoint\n","import LazyPoint from './LazyPoint'\nconst RADIUS_DEFAULT = 30\n\nclass LazyBrush {\n  /**\n   * constructor\n   *\n   * @param {object} settings\n   * @param {number} settings.radius The radius for the lazy area\n   * @param {boolean} settings.enabled\n   */\n  constructor ({ radius = RADIUS_DEFAULT, enabled = true, initialPoint = { x: 0, y: 0 }} = {}) {\n    this.radius = radius\n    this._isEnabled = enabled\n\n    this.pointer = new LazyPoint(initialPoint.x, initialPoint.y)\n    this.brush = new LazyPoint(initialPoint.x, initialPoint.y)\n\n    this.angle = 0\n    this.distance = 0\n    this._hasMoved = false\n  }\n\n  /**\n   * Enable lazy brush calculations.\n   *\n   */\n  enable () {\n    this._isEnabled = true\n  }\n\n  /**\n   * Disable lazy brush calculations.\n   *\n   */\n  disable () {\n    this._isEnabled = false\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isEnabled () {\n    return this._isEnabled\n  }\n\n  /**\n   * Update the radius\n   *\n   * @param {number} radius\n   */\n  setRadius (radius) {\n    this.radius = radius\n  }\n\n  /**\n   * Return the current radius\n   *\n   * @returns {number}\n   */\n  getRadius () {\n    return this.radius\n  }\n\n  /**\n   * Return the brush coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getBrushCoordinates () {\n    return this.brush.toObject()\n  }\n\n  /**\n   * Return the pointer coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getPointerCoordinates () {\n    return this.pointer.toObject()\n  }\n\n  /**\n   * Return the brush as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getBrush () {\n    return this.brush\n  }\n\n  /**\n   * Return the pointer as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getPointer () {\n    return this.pointer\n  }\n\n  /**\n   * Return the angle between pointer and brush\n   *\n   * @returns {number} Angle in radians\n   */\n  getAngle () {\n    return this.angle\n  }\n\n  /**\n   * Return the distance between pointer and brush\n   *\n   * @returns {number} Distance in pixels\n   */\n  getDistance () {\n    return this.distance\n  }\n\n  /**\n   * Return if the previous update has moved the brush.\n   *\n   * @returns {boolean} Whether the brush moved previously.\n   */\n  brushHasMoved () {\n    return this._hasMoved\n  }\n\n  /**\n   * Updates the pointer point and calculates the new brush point.\n   *\n   * @param {Point} newPointerPoint\n   * @param {Object} options\n   * @param {Boolean} options.both Force update pointer and brush\n   * @returns {Boolean} Whether any of the two points changed\n   */\n  update (newPointerPoint, { both = false } = {}) {\n    this._hasMoved = false\n    if (this.pointer.equalsTo(newPointerPoint) && !both) {\n      return false\n    }\n\n    this.pointer.update(newPointerPoint)\n\n    if (both) {\n      this._hasMoved = true\n      this.brush.update(newPointerPoint)\n      return true\n    }\n\n    if (this._isEnabled) {\n      this.distance = this.pointer.getDistanceTo(this.brush)\n      this.angle = this.pointer.getAngleTo(this.brush)\n\n      if (this.distance > this.radius) {\n        this.brush.moveByAngle(this.angle, this.distance - this.radius)\n        this._hasMoved = true\n      }\n    } else {\n      this.distance = 0\n      this.angle = 0\n      this.brush.update(newPointerPoint)\n      this._hasMoved = true\n    }\n\n    return true\n  }\n}\n\nexport default LazyBrush\n\n","<script>\n\t// @ts-nocheck\n\n\timport { onMount, onDestroy, createEventDispatcher, tick } from \"svelte\";\n\timport { fade } from \"svelte/transition\";\n\timport { LazyBrush } from \"lazy-brush/src\";\n\timport ResizeObserver from \"resize-observer-polyfill\";\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let value;\n\texport let value_img;\n\texport let mode = \"sketch\";\n\texport let brush_color = \"#0b0f19\";\n\texport let brush_radius = 50;\n\texport let source;\n\n\texport let width = 400;\n\texport let height = 200;\n\texport let container_height = 200;\n\n\tlet mounted;\n\n\tlet catenary_color = \"#aaa\";\n\n\tlet canvas_width = width;\n\tlet canvas_height = height;\n\n\t$: mounted && !value && clear();\n\n\tlet last_value_img;\n\n\t$: {\n\t\tif (mounted && value_img !== last_value_img) {\n\t\t\tlast_value_img = value_img;\n\n\t\t\tclear();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\tdraw_lines({ lines: lines.slice() });\n\t\t\t\ttrigger_on_change();\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tfunction mid_point(p1, p2) {\n\t\treturn {\n\t\t\tx: p1.x + (p2.x - p1.x) / 2,\n\t\t\ty: p1.y + (p2.y - p1.y) / 2\n\t\t};\n\t}\n\n\tconst canvas_types = [\n\t\t{\n\t\t\tname: \"interface\",\n\t\t\tzIndex: 15\n\t\t},\n\t\t{\n\t\t\tname: \"drawing\",\n\t\t\tzIndex: 11\n\t\t},\n\t\t{\n\t\t\tname: \"temp\",\n\t\t\tzIndex: 12\n\t\t},\n\t\t{\n\t\t\tname: \"mask\",\n\t\t\tzIndex: -1\n\t\t},\n\t\t{\n\t\t\tname: \"temp_fake\",\n\t\t\tzIndex: -2\n\t\t}\n\t];\n\n\tlet canvas = {};\n\tlet ctx = {};\n\tlet points = [];\n\tlet lines = [];\n\tlet mouse_has_moved = true;\n\tlet values_changed = true;\n\tlet is_drawing = false;\n\tlet is_pressing = false;\n\tlet lazy = null;\n\tlet canvas_container = null;\n\tlet canvas_observer = null;\n\tlet line_count = 0;\n\n\tonMount(async () => {\n\t\tObject.keys(canvas).forEach((key) => {\n\t\t\tctx[key] = canvas[key].getContext(\"2d\");\n\t\t});\n\n\t\tawait tick();\n\n\t\tif (value_img) {\n\t\t\tvalue_img.addEventListener(\"load\", (_) => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t}\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\ttrigger_on_change();\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\tdraw_lines({ lines: lines.slice() });\n\t\t\t\ttrigger_on_change();\n\t\t\t}, 100);\n\t\t}\n\n\t\tlazy = new LazyBrush({\n\t\t\tradius: brush_radius * 0.05,\n\t\t\tenabled: true,\n\t\t\tinitialPoint: {\n\t\t\t\tx: width / 2,\n\t\t\t\ty: height / 2\n\t\t\t}\n\t\t});\n\n\t\tcanvas_observer = new ResizeObserver((entries, observer, ...rest) => {\n\t\t\thandle_canvas_resize(entries, observer);\n\t\t});\n\t\tcanvas_observer.observe(canvas_container);\n\n\t\tloop();\n\t\tmounted = true;\n\n\t\trequestAnimationFrame(() => {\n\t\t\tinit();\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tclear();\n\t\t\t});\n\t\t});\n\t});\n\n\tfunction init() {\n\t\tconst initX = width / 2;\n\t\tconst initY = height / 2;\n\t\tlazy.update({ x: initX, y: initY }, { both: true });\n\t\tlazy.update({ x: initX, y: initY }, { both: false });\n\t\tmouse_has_moved = true;\n\t\tvalues_changed = true;\n\t}\n\n\tonDestroy(() => {\n\t\tmounted = false;\n\t\tcanvas_observer.unobserve(canvas_container);\n\t});\n\n\texport function undo() {\n\t\tconst _lines = lines.slice(0, -1);\n\n\t\tclear_canvas();\n\n\t\tif (value_img) {\n\t\t\tif (source === \"webcam\") {\n\t\t\t\tctx.temp.save();\n\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\tctx.temp.restore();\n\t\t\t} else {\n\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t}\n\n\t\t\tif (!lines || !lines.length) {\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\t\t\t}\n\t\t}\n\n\t\tdraw_lines({ lines: _lines });\n\t\tline_count = _lines.length;\n\n\t\tif (lines.length) {\n\t\t\tlines = _lines;\n\t\t}\n\n\t\ttrigger_on_change();\n\t}\n\n\tlet get_save_data = () => {\n\t\treturn JSON.stringify({\n\t\t\tlines: lines,\n\t\t\twidth: canvas_width,\n\t\t\theight: canvas_height\n\t\t});\n\t};\n\n\tlet draw_lines = ({ lines }) => {\n\t\tlines.forEach((line) => {\n\t\t\tconst { points: _points, brush_color, brush_radius } = line;\n\t\t\tdraw_points({\n\t\t\t\tpoints: _points,\n\t\t\t\tbrush_color,\n\t\t\t\tbrush_radius\n\t\t\t});\n\n\t\t\tif (mode === \"mask\") {\n\t\t\t\tdraw_fake_points({\n\t\t\t\t\tpoints: _points,\n\t\t\t\t\tbrush_color,\n\t\t\t\t\tbrush_radius\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tpoints = _points;\n\n\t\t\treturn;\n\t\t});\n\t\tsaveLine({ brush_color, brush_radius });\n\t\tif (mode === \"mask\") {\n\t\t\tsave_mask_line();\n\t\t}\n\t};\n\n\tlet handle_draw_start = (e) => {\n\t\te.preventDefault();\n\t\tis_pressing = true;\n\t\tconst { x, y } = get_pointer_pos(e);\n\t\tif (e.touches && e.touches.length > 0) {\n\t\t\tlazy.update({ x, y }, { both: true });\n\t\t}\n\t\thandle_pointer_move(x, y);\n\t\tline_count += 1;\n\t};\n\n\tlet handle_draw_move = (e) => {\n\t\te.preventDefault();\n\t\tconst { x, y } = get_pointer_pos(e);\n\t\thandle_pointer_move(x, y);\n\t};\n\n\tlet handle_draw_end = (e) => {\n\t\te.preventDefault();\n\t\thandle_draw_move(e);\n\t\tis_drawing = false;\n\t\tis_pressing = false;\n\t\tsaveLine();\n\n\t\tif (mode === \"mask\") {\n\t\t\tsave_mask_line();\n\t\t}\n\t};\n\n\tlet old_width = 0;\n\tlet old_height = 0;\n\tlet old_container_height = 0;\n\n\tlet handle_canvas_resize = async () => {\n\t\tif (\n\t\t\twidth === old_width &&\n\t\t\theight === old_height &&\n\t\t\told_container_height === container_height\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst dimensions = { width: width, height: height };\n\n\t\tconst container_dimensions = {\n\t\t\theight: container_height,\n\t\t\twidth: container_height * (dimensions.width / dimensions.height)\n\t\t};\n\n\t\tawait Promise.all([\n\t\t\tset_canvas_size(canvas.interface, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.drawing, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.temp, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.temp_fake, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.mask, dimensions, container_dimensions, false)\n\t\t]);\n\n\t\tbrush_radius = 20 * (dimensions.width / container_dimensions.width);\n\n\t\tloop({ once: true });\n\n\t\tsetTimeout(() => {\n\t\t\told_height = height;\n\t\t\told_width = width;\n\t\t\told_container_height = container_height;\n\t\t}, 100);\n\n\t\tclear();\n\t};\n\n\t$: {\n\t\tif (lazy) {\n\t\t\tinit();\n\t\t\tlazy.setRadius(brush_radius * 0.05);\n\t\t}\n\t}\n\n\t$: {\n\t\tif (width || height) {\n\t\t\thandle_canvas_resize();\n\t\t}\n\t}\n\n\tlet set_canvas_size = async (canvas, dimensions, container, scale = true) => {\n\t\tif (!mounted) return;\n\t\tawait tick();\n\n\t\tconst dpr = window.devicePixelRatio || 1;\n\t\tcanvas.width = dimensions.width * (scale ? dpr : 1);\n\t\tcanvas.height = dimensions.height * (scale ? dpr : 1);\n\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tscale && ctx.scale(dpr, dpr);\n\n\t\tcanvas.style.width = `${container.width}px`;\n\t\tcanvas.style.height = `${container.height}px`;\n\t};\n\n\tlet get_pointer_pos = (e) => {\n\t\tconst rect = canvas.interface.getBoundingClientRect();\n\n\t\tlet clientX = e.clientX;\n\t\tlet clientY = e.clientY;\n\t\tif (e.changedTouches && e.changedTouches.length > 0) {\n\t\t\tclientX = e.changedTouches[0].clientX;\n\t\t\tclientY = e.changedTouches[0].clientY;\n\t\t}\n\n\t\treturn {\n\t\t\tx: ((clientX - rect.left) / rect.width) * width,\n\t\t\ty: ((clientY - rect.top) / rect.height) * height\n\t\t};\n\t};\n\n\tlet handle_pointer_move = (x, y) => {\n\t\tlazy.update({ x: x, y: y });\n\t\tconst is_disabled = !lazy.isEnabled();\n\t\tif ((is_pressing && !is_drawing) || (is_disabled && is_pressing)) {\n\t\t\tis_drawing = true;\n\t\t\tpoints.push(lazy.brush.toObject());\n\t\t}\n\t\tif (is_drawing) {\n\t\t\tpoints.push(lazy.brush.toObject());\n\t\t\tdraw_points({\n\t\t\t\tpoints: points,\n\t\t\t\tbrush_color,\n\t\t\t\tbrush_radius\n\t\t\t});\n\n\t\t\tif (mode === \"mask\") {\n\t\t\t\tdraw_fake_points({\n\t\t\t\t\tpoints: points,\n\t\t\t\t\tbrush_color,\n\t\t\t\t\tbrush_radius\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tmouse_has_moved = true;\n\t};\n\n\tlet draw_points = ({ points, brush_color, brush_radius }) => {\n\t\tif (!points || points.length < 2) return;\n\t\tctx.temp.lineJoin = \"round\";\n\t\tctx.temp.lineCap = \"round\";\n\n\t\tctx.temp.strokeStyle = brush_color;\n\t\tctx.temp.lineWidth = brush_radius;\n\t\tif (!points || points.length < 2) return;\n\t\tlet p1 = points[0];\n\t\tlet p2 = points[1];\n\t\tctx.temp.moveTo(p2.x, p2.y);\n\t\tctx.temp.beginPath();\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\n\t\t\tvar midPoint = mid_point(p1, p2);\n\t\t\tctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n\t\t\tp1 = points[i];\n\t\t\tp2 = points[i + 1];\n\t\t}\n\n\t\tctx.temp.lineTo(p1.x, p1.y);\n\t\tctx.temp.stroke();\n\t};\n\n\tlet draw_fake_points = ({ points, brush_color, brush_radius }) => {\n\t\tif (!points || points.length < 2) return;\n\n\t\tctx.temp_fake.lineJoin = \"round\";\n\t\tctx.temp_fake.lineCap = \"round\";\n\t\tctx.temp_fake.strokeStyle = \"#fff\";\n\t\t// ctx.temp_fake.clearRect(0, 0, width, height);\n\t\tctx.temp_fake.lineWidth = brush_radius;\n\t\tlet p1 = points[0];\n\t\tlet p2 = points[1];\n\t\tctx.temp_fake.moveTo(p2.x, p2.y);\n\t\tctx.temp_fake.beginPath();\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\n\t\t\tvar midPoint = mid_point(p1, p2);\n\t\t\tctx.temp_fake.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n\t\t\tp1 = points[i];\n\t\t\tp2 = points[i + 1];\n\t\t}\n\n\t\tctx.temp_fake.lineTo(p1.x, p1.y);\n\t\tctx.temp_fake.stroke();\n\t};\n\n\tlet save_mask_line = () => {\n\t\tif (points.length < 1) return;\n\t\tpoints.length = 0;\n\t\tctx.mask.drawImage(canvas.temp_fake, 0, 0, width, height);\n\n\t\ttrigger_on_change();\n\t};\n\n\tlet saveLine = () => {\n\t\tif (points.length < 1) return;\n\n\t\tlines.push({\n\t\t\tpoints: points.slice(),\n\t\t\tbrush_color: brush_color,\n\t\t\tbrush_radius\n\t\t});\n\n\t\tif (mode !== \"mask\") {\n\t\t\tpoints.length = 0;\n\t\t}\n\n\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\ttrigger_on_change();\n\t};\n\n\tlet trigger_on_change = () => {\n\t\tconst x = get_image_data();\n\t\tdispatch(\"change\", x);\n\t};\n\n\texport function clear() {\n\t\tlines = [];\n\t\tclear_canvas();\n\t\tline_count = 0;\n\n\t\treturn true;\n\t}\n\n\tfunction clear_canvas() {\n\t\tvalues_changed = true;\n\t\tctx.temp.clearRect(0, 0, width, height);\n\n\t\tctx.temp.fillStyle = mode === \"mask\" ? \"transparent\" : \"#FFFFFF\";\n\t\tctx.temp.fillRect(0, 0, width, height);\n\n\t\tif (mode === \"mask\") {\n\t\t\tctx.temp_fake.clearRect(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tcanvas.temp_fake.width,\n\t\t\t\tcanvas.temp_fake.height\n\t\t\t);\n\t\t\tctx.mask.clearRect(0, 0, width, height);\n\t\t\tctx.mask.fillStyle = \"#000\";\n\t\t\tctx.mask.fillRect(0, 0, width, height);\n\t\t}\n\t}\n\n\tlet loop = ({ once = false } = {}) => {\n\t\tif (mouse_has_moved || values_changed) {\n\t\t\tconst pointer = lazy.getPointerCoordinates();\n\t\t\tconst brush = lazy.getBrushCoordinates();\n\t\t\tdraw_interface(ctx.interface, pointer, brush);\n\t\t\tmouse_has_moved = false;\n\t\t\tvalues_changed = false;\n\t\t}\n\t\tif (!once) {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tloop();\n\t\t\t});\n\t\t}\n\t};\n\n\t$: brush_dot = brush_radius * 0.075;\n\n\tlet draw_interface = (ctx, pointer, brush) => {\n\t\tctx.clearRect(0, 0, width, height);\n\n\t\t// brush preview\n\t\tctx.beginPath();\n\t\tctx.fillStyle = brush_color;\n\t\tctx.arc(brush.x, brush.y, brush_radius / 2, 0, Math.PI * 2, true);\n\t\tctx.fill();\n\n\t\t// tiny brush point dot\n\t\tctx.beginPath();\n\t\tctx.fillStyle = catenary_color;\n\t\tctx.arc(brush.x, brush.y, brush_dot, 0, Math.PI * 2, true);\n\t\tctx.fill();\n\t};\n\n\texport function get_image_data() {\n\t\treturn mode === \"mask\"\n\t\t\t? canvas.mask.toDataURL(\"image/jpg\")\n\t\t\t: canvas.drawing.toDataURL(\"image/jpg\");\n\t}\n</script>\n\n<div\n\tclass=\"touch-none relative h-full w-full\"\n\tbind:this={canvas_container}\n\tbind:offsetWidth={canvas_width}\n\tbind:offsetHeight={canvas_height}\n>\n\t{#if line_count === 0}\n\t\t<div\n\t\t\ttransition:fade={{ duration: 50 }}\n\t\t\tclass=\"absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl\"\n\t\t>\n\t\t\tStart drawing\n\t\t</div>\n\t{/if}\n\t{#each canvas_types as { name, zIndex }}\n\t\t<canvas\n\t\t\tkey={name}\n\t\t\tclass=\"inset-0 m-auto hover:cursor-none\"\n\t\t\tstyle=\" display:block;position:absolute; z-index:{zIndex};\"\n\t\t\tbind:this={canvas[name]}\n\t\t\ton:mousedown={name === \"interface\" ? handle_draw_start : undefined}\n\t\t\ton:mousemove={name === \"interface\" ? handle_draw_move : undefined}\n\t\t\ton:mouseup={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:mouseout={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:blur={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:touchstart={name === \"interface\" ? handle_draw_start : undefined}\n\t\t\ton:touchmove={name === \"interface\" ? handle_draw_move : undefined}\n\t\t\ton:touchend={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:touchcancel={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:click|stopPropagation\n\t\t/>\n\t{/each}\n</div>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { Undo, Clear } from \"@gradio/icons\";\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<div class=\"z-50 top-2 right-2 justify-end flex gap-1 absolute\">\n\t<IconButton Icon={Undo} label=\"Undo\" on:click={() => dispatch(\"undo\")} />\n\t<IconButton\n\t\tIcon={Clear}\n\t\tlabel=\"Clear\"\n\t\ton:click={(event) => {\n\t\t\tdispatch(\"clear\");\n\t\t\tevent.stopPropagation();\n\t\t}}\n\t/>\n</div>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { Brush, Color } from \"@gradio/icons\";\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet show_size = false;\n\tlet show_col = false;\n\n\texport let brush_radius = 20;\n\texport let brush_color = \"#000\";\n\texport let container_height: number;\n\texport let img_width: number;\n\texport let img_height: number;\n\texport let mode: \"mask\" | \"other\" = \"other\";\n\n\t$: width = container_height * (img_width / img_height);\n</script>\n\n<div class=\"z-50 top-10 right-2 justify-end flex gap-1 absolute\">\n\t<!-- <IconButton Icon={Undo} on:click={() => dispatch(\"undo\")} /> -->\n\n\t<span class=\"absolute top-0 right-0\">\n\t\t<IconButton\n\t\t\tIcon={Brush}\n\t\t\tlabel=\"Use brush\"\n\t\t\ton:click={() => (show_size = !show_size)}\n\t\t/>\n\t\t{#if show_size}\n\t\t\t<input\n\t\t\t\taria-label=\"Brush radius\"\n\t\t\t\tbind:value={brush_radius}\n\t\t\t\tclass=\"absolute top-[2px] right-6\"\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin={0.5 * (img_width / width)}\n\t\t\t\tmax={75 * (img_width / width)}\n\t\t\t/>\n\t\t{/if}\n\t</span>\n\n\t{#if mode !== \"mask\"}\n\t\t<span class=\"absolute top-6 right-0\">\n\t\t\t<IconButton\n\t\t\t\tIcon={Color}\n\t\t\t\tlabel=\"Select brush color\"\n\t\t\t\ton:click={() => (show_col = !show_col)}\n\t\t\t/>\n\t\t\t{#if show_col}\n\t\t\t\t<input\n\t\t\t\t\taria-label=\"Brush color\"\n\t\t\t\t\tbind:value={brush_color}\n\t\t\t\t\tclass=\"absolute top-[-3px] right-6\"\n\t\t\t\t\ttype=\"color\"\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</span>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\t// @ts-nocheck\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport { Image, Sketch as SketchIcon } from \"@gradio/icons\";\n\n\timport Cropper from \"./Cropper.svelte\";\n\timport Sketch from \"./Sketch.svelte\";\n\timport Webcam from \"./Webcam.svelte\";\n\timport ModifySketch from \"./ModifySketch.svelte\";\n\timport SketchSettings from \"./SketchSettings.svelte\";\n\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\n\n\texport let value:\n\t\t| null\n\t\t| string\n\t\t| { image: string | null; mask: string | null };\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" | \"sketch\" = \"editor\";\n\n\texport let drop_text: string = \"Drop an image file\";\n\texport let or_text: string = \"or\";\n\texport let upload_text: string = \"click to upload\";\n\texport let streaming: boolean = false;\n\texport let pending: boolean = false;\n\texport let mirror_webcam: boolean;\n\n\tlet sketch: Sketch;\n\n\tif (\n\t\tvalue &&\n\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\ttool === \"sketch\"\n\t) {\n\t\tvalue = { image: value as string, mask: null };\n\t}\n\n\tfunction handle_upload({ detail }: CustomEvent<string>) {\n\t\tif (tool === \"color-sketch\") {\n\t\t\tstatic_image = detail;\n\t\t} else {\n\t\t\tvalue =\n\t\t\t\t(source === \"upload\" || source === \"webcam\") && tool === \"sketch\"\n\t\t\t\t\t? { image: detail, mask: null }\n\t\t\t\t\t: detail;\n\t\t}\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction handle_clear({ detail }: CustomEvent<null>) {\n\t\tvalue = null;\n\t\tstatic_image = undefined;\n\t\tdispatch(\"clear\");\n\t}\n\n\tasync function handle_save({ detail }: { detail: string }, initial) {\n\t\tif (mode === \"mask\") {\n\t\t\tif (source === \"webcam\" && initial) {\n\t\t\t\tvalue = {\n\t\t\t\t\timage: detail,\n\t\t\t\t\tmask: null\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvalue = {\n\t\t\t\t\timage: typeof value === \"string\" ? value : value?.image || null,\n\t\t\t\t\tmask: detail\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\t\ttool === \"sketch\"\n\t\t) {\n\t\t\tvalue = { image: detail, mask: null };\n\t\t} else {\n\t\t\tvalue = detail;\n\t\t}\n\n\t\tawait tick();\n\n\t\tdispatch(streaming ? \"stream\" : \"edit\");\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string | null;\n\t\tstream: string | null;\n\t\tedit: undefined;\n\t\tclear: undefined;\n\t\tdrag: boolean;\n\t\tupload: FileData;\n\t}>();\n\n\t$: dispatch(\"change\", value as string);\n\n\tlet dragging = false;\n\n\t$: dispatch(\"drag\", dragging);\n\n\tfunction handle_image_load(event: Event) {\n\t\tconst element = event.composedPath()[0] as HTMLImageElement;\n\t\timg_width = element.naturalWidth;\n\t\timg_height = element.naturalHeight;\n\t\tcontainer_height = element.getBoundingClientRect().height;\n\t}\n\n\tasync function handle_mask_clear() {\n\t\tsketch.clear();\n\t\tawait tick();\n\t\tvalue = null;\n\t\tstatic_image = undefined;\n\t}\n\n\tlet img_height = 0;\n\tlet img_width = 0;\n\tlet container_height = 0;\n\n\tlet brush_radius = 20;\n\n\tlet mode;\n\n\t$: {\n\t\tif (source === \"canvas\" && tool === \"sketch\") {\n\t\t\tmode = \"bw-sketch\";\n\t\t} else if (tool === \"color-sketch\") {\n\t\t\tmode = \"color-sketch\";\n\t\t} else if (\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\t\ttool === \"sketch\"\n\t\t) {\n\t\t\tmode = \"mask\";\n\t\t} else {\n\t\t\tmode = \"editor\";\n\t\t}\n\t}\n\n\t$: brush_color = mode == \"mask\" ? \"#000000\" : \"#000\";\n\n\tlet value_img;\n\tlet max_height;\n\tlet max_width;\n\n\tlet static_image = undefined;\n\n\t$: {\n\t\tif (value === null || (value.image === null && value.mask === null)) {\n\t\t\tstatic_image = undefined;\n\t\t}\n\t}\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={source === \"canvas\" ? SketchIcon : Image}\n\tlabel={label || (source === \"canvas\" ? \"Sketch\" : \"Image\")}\n/>\n\n<div\n\tclass:bg-gray-200={value}\n\tclass:h-60={source !== \"webcam\" ||\n\t\ttool === \"sketch\" ||\n\t\ttool === \"color-sketch\"}\n\tdata-testid=\"image\"\n\tbind:offsetHeight={max_height}\n\tbind:offsetWidth={max_width}\n>\n\t{#if source === \"upload\"}\n\t\t<Upload\n\t\t\tbind:dragging\n\t\t\tfiletype=\"image/x-png,image/gif,image/jpeg\"\n\t\t\ton:load={handle_upload}\n\t\t\tinclude_file_metadata={false}\n\t\t\tdisable_click={!!value}\n\t\t>\n\t\t\t{#if (value === null && !static_image) || streaming}\n\t\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t\t{drop_text}\n\t\t\t\t\t<span class=\"text-gray-300\">- {or_text} -</span>\n\t\t\t\t\t{upload_text}\n\t\t\t\t</div>\n\t\t\t{:else if tool === \"select\"}\n\t\t\t\t<Cropper image={value} on:crop={handle_save} />\n\t\t\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\n\t\t\t{:else if tool === \"editor\"}\n\t\t\t\t<ModifyUpload\n\t\t\t\t\ton:edit={() => (tool = \"select\")}\n\t\t\t\t\ton:clear={handle_clear}\n\t\t\t\t\teditable\n\t\t\t\t/>\n\n\t\t\t\t<img\n\t\t\t\t\tclass=\"w-full h-full object-contain\"\n\t\t\t\t\tsrc={value}\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t\t\t/>\n\t\t\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\n\t\t\t\t{#key static_image}\n\t\t\t\t\t<img\n\t\t\t\t\t\tbind:this={value_img}\n\t\t\t\t\t\tclass=\"absolute w-full h-full object-contain\"\n\t\t\t\t\t\tsrc={static_image || value?.image || value}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\ton:load={handle_image_load}\n\t\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t\t\t\t/>\n\t\t\t\t{/key}\n\t\t\t\t{#if img_width > 0}\n\t\t\t\t\t<Sketch\n\t\t\t\t\t\t{value}\n\t\t\t\t\t\tbind:this={sketch}\n\t\t\t\t\t\tbind:brush_radius\n\t\t\t\t\t\tbind:brush_color\n\t\t\t\t\t\ton:change={handle_save}\n\t\t\t\t\t\t{mode}\n\t\t\t\t\t\twidth={img_width || max_width}\n\t\t\t\t\t\theight={img_height || max_height}\n\t\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\t\t{value_img}\n\t\t\t\t\t\t{source}\n\t\t\t\t\t/>\n\t\t\t\t\t<ModifySketch\n\t\t\t\t\t\ton:undo={() => sketch.undo()}\n\t\t\t\t\t\ton:clear={handle_mask_clear}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\n\t\t\t\t\t\t<SketchSettings\n\t\t\t\t\t\t\tbind:brush_radius\n\t\t\t\t\t\t\tbind:brush_color\n\t\t\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\t\t\timg_width={img_width || max_width}\n\t\t\t\t\t\t\timg_height={img_height || max_height}\n\t\t\t\t\t\t\t{mode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t\t<img\n\t\t\t\t\tclass=\"w-full h-full object-contain\"\n\t\t\t\t\tsrc={value.image || value}\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</Upload>\n\t{:else if source === \"canvas\"}\n\t\t<ModifySketch\n\t\t\ton:undo={() => sketch.undo()}\n\t\t\ton:clear={() => sketch.clear()}\n\t\t/>\n\t\t{#if tool === \"color-sketch\"}\n\t\t\t<SketchSettings\n\t\t\t\tbind:brush_radius\n\t\t\t\tbind:brush_color\n\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\timg_width={img_width || max_width}\n\t\t\t\timg_height={img_height || max_height}\n\t\t\t/>\n\t\t{/if}\n\t\t<Sketch\n\t\t\t{value}\n\t\t\tbind:brush_radius\n\t\t\tbind:brush_color\n\t\t\tbind:this={sketch}\n\t\t\ton:change={handle_save}\n\t\t\t{mode}\n\t\t\twidth={img_width || max_width}\n\t\t\theight={img_height || max_height}\n\t\t\tcontainer_height={container_height || max_height}\n\t\t/>\n\t{:else if (value === null && !static_image) || streaming}\n\t\t{#if source === \"webcam\" && !static_image}\n\t\t\t<Webcam\n\t\t\t\ton:capture={(e) =>\n\t\t\t\t\ttool === \"color-sketch\" ? handle_upload(e) : handle_save(e, true)}\n\t\t\t\ton:stream={handle_save}\n\t\t\t\ton:error\n\t\t\t\t{streaming}\n\t\t\t\t{pending}\n\t\t\t\t{mirror_webcam}\n\t\t\t/>\n\t\t{/if}\n\t{:else if tool === \"select\"}\n\t\t<Cropper image={value} on:crop={handle_save} />\n\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\n\t{:else if tool === \"editor\"}\n\t\t<ModifyUpload\n\t\t\ton:edit={() => (tool = \"select\")}\n\t\t\ton:clear={handle_clear}\n\t\t\teditable\n\t\t/>\n\n\t\t<img\n\t\t\tclass=\"w-full h-full object-contain\"\n\t\t\tsrc={value}\n\t\t\talt=\"\"\n\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t/>\n\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\n\t\t{#key static_image}\n\t\t\t<img\n\t\t\t\tbind:this={value_img}\n\t\t\t\tclass=\"absolute w-full h-full object-contain\"\n\t\t\t\tsrc={static_image || value?.image || value}\n\t\t\t\talt=\"\"\n\t\t\t\ton:load={handle_image_load}\n\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t\t/>\n\t\t{/key}\n\t\t{#if img_width > 0}\n\t\t\t<Sketch\n\t\t\t\t{value}\n\t\t\t\tbind:this={sketch}\n\t\t\t\tbind:brush_radius\n\t\t\t\tbind:brush_color\n\t\t\t\ton:change={handle_save}\n\t\t\t\t{mode}\n\t\t\t\twidth={img_width || max_width}\n\t\t\t\theight={img_height || max_height}\n\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t{value_img}\n\t\t\t\t{source}\n\t\t\t/>\n\t\t\t<ModifySketch\n\t\t\t\ton:undo={() => sketch.undo()}\n\t\t\t\ton:clear={handle_mask_clear}\n\t\t\t/>\n\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\n\t\t\t\t<SketchSettings\n\t\t\t\t\tbind:brush_radius\n\t\t\t\t\tbind:brush_color\n\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\timg_width={img_width || max_width}\n\t\t\t\t\timg_height={img_height || max_height}\n\t\t\t\t\t{mode}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t{/if}\n\t{:else}\n\t\t<img\n\t\t\tclass=\"w-full h-full object-contain\"\n\t\t\tsrc={value.image || value}\n\t\t\talt=\"\"\n\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t/>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\n\timport { Image } from \"@gradio/icons\";\n\n\texport let value: null | string;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\n{#if value === null}\n\t<div class=\"h-full min-h-[15rem] flex justify-center items-center\">\n\t\t<div class=\"h-5 dark:text-white opacity-50\"><Image /></div>\n\t</div>\n{:else}\n\t<img class=\"w-full h-full object-contain\" src={value} alt=\"\" />\n{/if}\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Image, StaticImage } from \"@gradio/image\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { _ } from \"svelte-i18n\";\n\timport { Component as StatusTracker } from \"../StatusTracker/\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport type { Styles } from \"@gradio/utils\";\n\n\texport let elem_id: string = \"\";\n\texport let visible: boolean = true;\n\texport let value: null | string = null;\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" = \"editor\";\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let streaming: boolean;\n\texport let pending: boolean;\n\texport let style: Styles = {};\n\texport let mirror_webcam: boolean;\n\n\texport let loading_status: LoadingStatus;\n\n\texport let mode: \"static\" | \"dynamic\";\n\n\tconst dispatch = createEventDispatcher<{ change: undefined }>();\n\n\t$: value, dispatch(\"change\");\n\tlet dragging: boolean;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\n\t\t? \"dashed\"\n\t\t: \"solid\"}\n\tcolor={dragging ? \"green\" : \"grey\"}\n\tpadding={false}\n\t{elem_id}\n\tstyle={{ height: style.height, width: style.width }}\n>\n\t<StatusTracker {...loading_status} />\n\t{#if mode === \"static\"}\n\t\t<StaticImage {value} {label} {show_label} />\n\t{:else}\n\t\t<Image\n\t\t\tbind:value\n\t\t\t{source}\n\t\t\t{tool}\n\t\t\ton:edit\n\t\t\ton:clear\n\t\t\ton:change\n\t\t\ton:stream\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tloading_status = loading_status || {};\n\t\t\t\tloading_status.status = \"error\";\n\t\t\t\tloading_status.message = detail;\n\t\t\t}}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\tdrop_text={$_(\"interface.drop_image\")}\n\t\t\tor_text={$_(\"or\")}\n\t\t\tupload_text={$_(\"interface.click_to_upload\")}\n\t\t\t{mirror_webcam}\n\t\t/>\n\t{/if}\n</Block>\n","export { default as Component } from \"./Image.svelte\";\nexport { default as ExampleComponent } from \"../Dataset/ExampleComponents/Image.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: \"string\",\n\tdescription: \"image data as base64 string\",\n\texample_data:\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==\"\n});\n"],"names":["ResizeObserver","SketchIcon"],"mappings":"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"}