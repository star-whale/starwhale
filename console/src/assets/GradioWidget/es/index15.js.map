{"version":3,"file":"index15.js","sources":["../../file/src/utils.ts","../../file/src/File.svelte","../../file/src/FileUpload.svelte","../../app/src/components/File/File.svelte","../../app/src/components/File/index.ts"],"sourcesContent":["import type { FileData } from \"@gradio/upload\";\n\nexport const prettyBytes = (bytes: number): string => {\n\tlet units = [\"B\", \"KB\", \"MB\", \"GB\", \"PB\"];\n\tlet i = 0;\n\twhile (bytes > 1024) {\n\t\tbytes /= 1024;\n\t\ti++;\n\t}\n\tlet unit = units[i];\n\treturn bytes.toFixed(1) + \" \" + unit;\n};\n\nexport const display_file_name = (value: FileData): string => {\n\tvar str: string;\n\tstr = value.orig_name || value.name;\n\tif (str.length > 30) {\n\t\treturn `${str.substr(0, 30)}...`;\n\t} else return str;\n};\n\nexport const download_files = (value: FileData): string => {\n\treturn value.data;\n};\n\nexport const display_file_size = (\n\tvalue: FileData | Array<FileData>\n): string => {\n\tvar total_size = 0;\n\tif (Array.isArray(value)) {\n\t\tfor (var file of value) {\n\t\t\tif (file.size !== undefined) total_size += file.size;\n\t\t}\n\t} else {\n\t\ttotal_size = value.size || 0;\n\t}\n\treturn prettyBytes(total_size);\n};\n","<script lang=\"ts\">\n\timport type { FileData } from \"@gradio/upload\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport {\n\t\tdisplay_file_name,\n\t\tdownload_files,\n\t\tdisplay_file_size\n\t} from \"./utils\";\n\timport { File } from \"@gradio/icons\";\n\n\texport let value: FileData | null;\n\texport let label: string;\n\texport let show_label: boolean;\n</script>\n\n<BlockLabel {show_label} Icon={File} label={label || \"File\"} />\n\n{#if value}\n\t<div\n\t\tclass=\"file-preview overflow-y-scroll w-full max-h-60 flex flex-col justify-between mt-7 mb-7 dark:text-slate-200\"\n\t>\n\t\t{#if Array.isArray(value)}\n\t\t\t{#each value as file}\n\t\t\t\t<div class=\"flex flex-row w-full justify-between\">\n\t\t\t\t\t<div class=\"file-name p-2\">\n\t\t\t\t\t\t{display_file_name(file)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"file-size  p-2\">\n\t\t\t\t\t\t{display_file_size(file)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"file-size w-3/12 p-2 hover:underline\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={download_files(file)}\n\t\t\t\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\t\t\t\tdownload={window.__is_colab__ ? null : display_file_name(file)}\n\t\t\t\t\t\t\tclass=\"text-indigo-600 hover:underline dark:text-indigo-300\"\n\t\t\t\t\t\t\t>Download</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t{:else}\n\t\t\t<div class=\"flex flex-row\">\n\t\t\t\t<div class=\"file-name w-5/12 p-2\">\n\t\t\t\t\t{display_file_name(value)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"file-size w-3/12  p-2\">\n\t\t\t\t\t{display_file_size(value)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"file-size w-3/12 p-2 hover:underline\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={download_files(value)}\n\t\t\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\t\t\tdownload={window.__is_colab__ ? null : display_file_name(value)}\n\t\t\t\t\t\tclass=\"text-indigo-600 hover:underline dark:text-indigo-300\"\n\t\t\t\t\t\t>Download</a\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{:else}\n\t<div class=\"h-full min-h-[15rem] flex justify-center items-center\">\n\t\t<div class=\"h-5 dark:text-white opacity-50\"><File /></div>\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\n\timport type { FileData } from \"@gradio/upload\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport { File } from \"@gradio/icons\";\n\n\timport {\n\t\tdisplay_file_name,\n\t\tdownload_files,\n\t\tdisplay_file_size\n\t} from \"./utils\";\n\n\texport let value: null | FileData | Array<FileData>;\n\n\texport let drop_text: string = \"Drop a file\";\n\texport let or_text: string = \"or\";\n\texport let upload_text: string = \"click to upload\";\n\texport let label: string = \"\";\n\texport let show_label: boolean;\n\texport let file_count: string;\n\texport let file_types: Array<string> = [\"file\"];\n\n\tasync function handle_upload({ detail }: CustomEvent<FileData>) {\n\t\tvalue = detail;\n\t\tawait tick();\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction handle_clear({ detail }: CustomEvent<null>) {\n\t\tvalue = null;\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"clear\");\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData | null;\n\t\tclear: undefined;\n\t\tdrag: boolean;\n\t\tupload: FileData;\n\t\terror: string;\n\t}>();\n\n\tlet accept_file_types = \"\";\n\ttry {\n\t\tfile_types.forEach((type) => (accept_file_types += type + \"/*, \"));\n\t} catch (err) {\n\t\tif (err instanceof TypeError) {\n\t\t\tdispatch(\"error\", \"Please set file_types to a list.\");\n\t\t} else {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tlet dragging = false;\n\t$: dispatch(\"drag\", dragging);\n</script>\n\n<BlockLabel {show_label} Icon={File} label={label || \"File\"} />\n\n{#if value === null && file_count === \"single\"}\n\t<Upload on:load={handle_upload} filetype={accept_file_types} bind:dragging>\n\t\t{drop_text}\n\t\t<br />- {or_text} -<br />\n\t\t{upload_text}\n\t</Upload>\n{:else if value === null}\n\t<Upload\n\t\ton:load={handle_upload}\n\t\tfiletype={accept_file_types}\n\t\t{file_count}\n\t\tbind:dragging\n\t>\n\t\t{drop_text}\n\t\t<br />- {or_text} -<br />\n\t\t{upload_text}\n\t</Upload>\n{:else}\n\t<div\n\t\tclass=\"file-preview overflow-y-scroll w-full max-h-60 flex flex-col justify-between mt-7 mb-7 dark:text-slate-200\"\n\t>\n\t\t<ModifyUpload on:clear={handle_clear} absolute />\n\t\t{#if Array.isArray(value)}\n\t\t\t{#each value as file}\n\t\t\t\t<div class=\"flex flex-row w-full justify-between\">\n\t\t\t\t\t<div class=\"file-name w-5/12 p-2\">\n\t\t\t\t\t\t{display_file_name(file)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"file-size w-3/12 p-2\">\n\t\t\t\t\t\t{display_file_size(file)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"file-size w-3/12 p-2 hover:underline\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={download_files(file)}\n\t\t\t\t\t\t\tdownload={display_file_name(file)}\n\t\t\t\t\t\t\tclass=\"text-indigo-600 hover:underline dark:text-indigo-300\"\n\t\t\t\t\t\t\t>Download</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t{:else}\n\t\t\t<div class=\"flex flex-row\">\n\t\t\t\t<div class=\"file-name p-2\">\n\t\t\t\t\t{display_file_name(value)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"file-size  p-2\">\n\t\t\t\t\t{display_file_size(value)}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"file-size p-2 hover:underline\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={download_files(value)}\n\t\t\t\t\t\tdownload={display_file_name(value)}\n\t\t\t\t\t\tclass=\"text-indigo-600 hover:underline dark:text-indigo-300\"\n\t\t\t\t\t\t>Download</a\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { File, FileUpload } from \"@gradio/file\";\n\timport type { FileData } from \"@gradio/upload\";\n\timport { normalise_file } from \"@gradio/upload\";\n\timport { Block } from \"@gradio/atoms\";\n\n\timport StatusTracker from \"../StatusTracker/StatusTracker.svelte\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\n\timport { _ } from \"svelte-i18n\";\n\n\texport let elem_id: string = \"\";\n\texport let visible: boolean = true;\n\texport let value: null | FileData = null;\n\texport let mode: \"static\" | \"dynamic\";\n\texport let root: string;\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let file_count: string;\n\texport let file_types: Array<string> = [\"file\"];\n\texport let root_url: null | string;\n\n\texport let loading_status: LoadingStatus;\n\n\tlet _value: null | FileData;\n\t$: _value = normalise_file(value, root_url ?? root);\n\n\tlet dragging = false;\n</script>\n\n<Block\n\t{visible}\n\tvariant={mode === \"dynamic\" && value === null ? \"dashed\" : \"solid\"}\n\tcolor={dragging ? \"green\" : \"grey\"}\n\tpadding={false}\n\t{elem_id}\n>\n\t<StatusTracker {...loading_status} />\n\n\t{#if mode === \"dynamic\"}\n\t\t<FileUpload\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\tvalue={_value}\n\t\t\t{file_count}\n\t\t\t{file_types}\n\t\t\ton:change={({ detail }) => (value = detail)}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:change\n\t\t\ton:clear\n\t\t\ton:upload\n\t\t\tdrop_text={$_(\"interface.drop_file\")}\n\t\t\tor_text={$_(\"or\")}\n\t\t\tupload_text={$_(\"interface.click_to_upload\")}\n\t\t/>\n\t{:else}\n\t\t<File value={_value} {label} {show_label} />\n\t{/if}\n</Block>\n","export { default as Component } from \"./File.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: \"{ name: string; data: string }\",\n\tdescription: \"file name and base64 data as an object\",\n\texample_data: {\n\t\tname: \"zip.zip\",\n\t\tdata: \"data:@file/octet-stream;base64,UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA==\"\n\t}\n});\n"],"names":[],"mappings":";;;;;;MAEa,cAAc,CAAC,UAA0B;MACjD,QAAQ,CAAC,KAAK,MAAM,MAAM,MAAM,IAAI;MACpC,IAAI;SACD,QAAQ,MAAM;aACX;;;MAGN,OAAO,MAAM;SACV,MAAM,QAAQ,CAAC,IAAI,MAAM;AACjC;MAEa,oBAAoB,CAAC,UAA4B;MACzD;QACE,MAAM,aAAa,MAAM;MAC3B,IAAI,SAAS,IAAI;WACb,GAAG,IAAI,OAAO,GAAG,EAAE;AAAA;WACb;AACf;MAEa,iBAAiB,CAAC,UAA4B;SACnD,MAAM;AACd;MAEa,oBAAoB,CAChC,UACY;MACR,aAAa;MACb,MAAM,QAAQ,KAAK,GAAG;aAChB,QAAQ,OAAO;UACnB,KAAK,SAAS;sBAAyB,KAAK;AAAA;SAE3C;iBACO,MAAM,QAAQ;AAAA;SAErB,YAAY,UAAU;AAC9B;;;;;;;;;;;;;;;;;;;;;ACyBC;AACC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBA1CK,MAAM,QAAQ;;;;;;;;;;;;;;AAHpB;;;;;;;;;;;;;;;;;;;;;;;;;;;iBA0BK,kBAAkB;;;;iBAGlB,kBAAkB;;;;;;;;;;;;;;;;;;;gBAQjB,UAAQ;;;qCAJH,eAAe;wBACb,OAAO,eAAe,WAAW,IAAI;6CACnC,OAAO,eAAe,OAAO,kBAAkB;;;;;;AAX5D;AACC;;;AAGA;;;AAGA;AACC;;;;gDANC,kBAAkB;;gDAGlB,kBAAkB;;wDAIZ,eAAe;;;gEAEX,OAAO,eAAe,OAAO,kBAAkB;;;;;;;;;;;;mBA/BrD;;iCAAL;;;;;;;;;;;;;;;;;;qBAAK;;mCAAL;;;;;;;;;;;;;wCAAA;AAAA;;;;;;;;;;;;iBAGE,kBAAkB;;;;iBAGlB,kBAAkB;;;;;;;;;;;;;;;;;;;;;gBAQjB,UAAQ;;;;qCAJH,eAAe;yCACb,OAAO,eAAe,WAAW,IAAI;6CACnC,OAAO,eAAe,OAAO,kBAAkB;;;;;;AAX5D;AACC;;;AAGA;;;AAGA;AACC;;;;;gDANC,kBAAkB;;gDAGlB,kBAAkB;;wDAIZ,eAAe;;;gEAEX,OAAO,eAAe,OAAO,kBAAkB;;;;;;;;;;;;;;;;;;;;YAnBjC;AAAA,aAAa,UAAS;AAAA;;;;;QAEhD;;;;;;;;;;;;;;;;;;;;;;;;;mCAFuC,WAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QALzC;QACA;QACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BCsEc;;;;;kBACnB,MAAM,QAAQ;;;;;;;;;;;;;;;;AAJpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cATW;;;;;;;;;;qBADD;;;;;;;;;;;;kCACC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cAR+B;;;;;;;;;qBAAzB;;;;;;;;;;;;kCAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iBA2CrC,kBAAkB;;;;iBAGlB,kBAAkB;;;;;;;;;;;;;;;;;;;gBAOjB,UAAQ;;;qCAHH,eAAe;6CACX,kBAAkB;;;;;;AAV/B;AACC;;;AAGA;;;AAGA;AACC;;;;gDANC,kBAAkB;;gDAGlB,kBAAkB;;wDAIZ,eAAe;;;gEACX,kBAAkB;;;;;;;;;;;;mBA7BxB;;iCAAL;;;;;;;;;;;;;;;;;;qBAAK;;mCAAL;;;;;;;;;;;;;wCAAA;AAAA;;;;;;;;;;;;iBAGE,kBAAkB;;;;iBAGlB,kBAAkB;;;;;;;;;;;;;;;;;;;;gBAOjB,UAAQ;;;;qCAHH,eAAe;6CACX,kBAAkB;;;;;;AAV/B;AACC;;;AAGA;;;AAGA;AACC;;;;;gDANC,kBAAkB;;gDAGlB,kBAAkB;;wDAIZ,eAAe;;;gEACX,kBAAkB;;;;;;;;;;;;;;;;;;;;;;gBArBhC;;;gBACK,IAAE;gBAAC;gBAAQ,IAAE;;;gBAClB;;;;;AADD;;;;AAAmB;;;;;;qBADlB;;qBACQ;;qBACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAbA;;;gBACK,IAAE;gBAAC;gBAAQ,IAAE;;;gBAClB;;;;;AADD;;;;AAAmB;;;;;;qBADlB;;qBACQ;;qBACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAN4B;AAAA,aAAa,UAAS;AAAA;;;;;QAEhD,YAAU,QAAQ,YAAe;;QAM5B,YAAU;;;;;;;;;;;;;;;;;;;;;;;;;mCARwB,WAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA9CzC;QAEA,YAAoB;QACpB,UAAkB;QAClB,cAAsB;QACtB,QAAgB;QAChB;QACA;QACA,cAA6B,MAAM;iCAEf;oBAC9B,QAAQ,MAAM;UACR;AACN,aAAS,UAAU,KAAK;AACxB,aAAS,UAAU,MAAM;AAAA;0BAGF;oBACvB,QAAQ,IAAI;AACZ,aAAS,UAAU,KAAK;AACxB,aAAS,OAAO;AAAA;QAGX,WAAW;MAQb,oBAAoB;;AAEvB,eAAW,QAAS,0BAAU,qBAAqB,OAAO,MAAM;WACxD;QACJ,eAAe;AAClB,eAAS,SAAS,kCAAkC;AAAA;YAE9C;AAAA;;MAIJ,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACZ,eAAS,QAAQ,QAAQ;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aCAd;;;;;;;;;;;;;;;;6BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAbL;;;iBAQI,QAAG,qBAAqB;AAAA,eAC1B,QAAG,IAAI;AAAA,mBACH,QAAG,2BAA2B;AAAA;;;;;;;;;;;;;;;;;;;;;;mCAVpC;;;;;;uCAQI,SAAG,qBAAqB;;qCAC1B,SAAG,IAAI;;yCACH,SAAG,2BAA2B;;;;;;;;;;;;;;;;;;;;;;;;;uCAhB1B;;;;;;;;;QAEd,YAAS;;;;;;;;;;;;;;;;;;;;;oHAFK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eALV,WAAS,aAAa,WAAU,OAAO,WAAW;AAAA,aACpD,UAAW,UAAU;AAAA,eACnB;AAAA;;;;;;;;;;;;;;;;;;gCAFA,YAAS,aAAa,YAAU,OAAO,WAAW;;8BACpD,WAAW,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;QAtBjB,UAAkB;QAClB,UAAmB;QACnB,QAAyB;QACzB;QACA;QACA;QACA;QACA;QACA,cAA6B,MAAM;QACnC;QAEA;MAEP;MAGA,WAAW;8BAmBC,6BAAc,QAAQ,MAAM;0BAC9B,8BAAc,WAAW,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBAtB1C,SAAS,eAAe,OAAO,8BAAY,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCxBtC,QAAQ,CAAC,UAAU,SAAS;MAE5B,WAAW,CAAC;EACxB,MAAM;AAAA,EACN,aAAa;AAAA,EACb,cAAc;AAAA,IACb,MAAM;AAAA,IACN,MAAM;AAAA;AAER;;"}