{"version":3,"file":"index38.js","sources":["../../upload-button/src/UploadButton.svelte","../../app/src/components/UploadButton/UploadButton.svelte","../../app/src/components/UploadButton/index.ts"],"sourcesContent":["<script lang=\"ts\">\n\timport { get_styles } from \"@gradio/utils\";\n\timport type { Styles } from \"@gradio/utils\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { FileData } from \"./types\";\n\n\texport let style: Styles = {};\n\texport let elem_id: string = \"\";\n\texport let visible: boolean = true;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let file_count: string;\n\texport let file_types: Array<string> = [\"file\"];\n\texport let include_file_metadata = true;\n\n\t$: ({ classes } = get_styles(style, [\"full_width\"]));\n\n\tlet hidden_upload: HTMLInputElement;\n\tconst dispatch = createEventDispatcher();\n\tlet accept_file_types = \"\";\n\ttry {\n\t\tfile_types.forEach((type) => (accept_file_types += type + \"/*, \"));\n\t} catch (err) {\n\t\tif (err instanceof TypeError) {\n\t\t\tdispatch(\"error\", \"Please set file_types to a list.\");\n\t\t} else {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tconst openFileUpload = () => {\n\t\thidden_upload.click();\n\t};\n\n\tconst loadFiles = (files: FileList) => {\n\t\tlet _files: Array<File> = Array.from(files);\n\t\tif (!files.length || !window.FileReader) {\n\t\t\treturn;\n\t\t}\n\t\tif (file_count === \"single\") {\n\t\t\t_files = [files[0]];\n\t\t}\n\t\tvar all_file_data: Array<FileData | string> = [];\n\t\t_files.forEach((f, i) => {\n\t\t\tlet ReaderObj = new FileReader();\n\t\t\tReaderObj.readAsDataURL(f);\n\t\t\tReaderObj.onloadend = function () {\n\t\t\t\tall_file_data[i] = include_file_metadata\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tname: f.name,\n\t\t\t\t\t\t\tsize: f.size,\n\t\t\t\t\t\t\tdata: this.result as string\n\t\t\t\t\t  }\n\t\t\t\t\t: (this.result as string);\n\t\t\t\tif (\n\t\t\t\t\tall_file_data.filter((x) => x !== undefined).length === files.length\n\t\t\t\t) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\"load\",\n\t\t\t\t\t\tfile_count == \"single\" ? all_file_data[0] : all_file_data\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t};\n\n\tconst loadFilesFromUpload = (e: Event) => {\n\t\tconst target = e.target as HTMLInputElement;\n\n\t\tif (!target.files) return;\n\t\tloadFiles(target.files);\n\t};\n</script>\n\n<input\n\tclass=\"hidden-upload hidden\"\n\taccept={accept_file_types}\n\ttype=\"file\"\n\tbind:this={hidden_upload}\n\ton:change={loadFilesFromUpload}\n\tmultiple={file_count === \"multiple\" || undefined}\n\twebkitdirectory={file_count === \"directory\" || undefined}\n\tmozdirectory={file_count === \"directory\" || undefined}\n/>\n\n<button\n\ton:click={openFileUpload}\n\tclass:!hidden={!visible}\n\tclass=\"gr-button gr-button-{size}\n\t\t{classes}\"\n\tid={elem_id}\n>\n\t<slot />\n</button>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport type { Styles } from \"@gradio/utils\";\n\timport type { FileData } from \"@gradio/upload\";\n\timport { UploadButton } from \"@gradio/uploadbutton\";\n\timport { _ } from \"svelte-i18n\";\n\n\texport let style: Styles = {};\n\texport let elem_id: string = \"\";\n\texport let visible: boolean = true;\n\texport let label: string;\n\texport let value: null | FileData | Array<FileData>;\n\texport let file_count: string;\n\texport let file_types: Array<string> = [\"file\"];\n\n\tasync function handle_upload({ detail }: CustomEvent<FileData>) {\n\t\tvalue = detail;\n\t\tawait tick();\n\t\tdispatch(\"change\", value);\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData | null;\n\t\tupload: FileData;\n\t}>();\n</script>\n\n<UploadButton\n\t{elem_id}\n\t{style}\n\t{visible}\n\t{file_count}\n\t{file_types}\n\ton:click\n\ton:load={handle_upload}\n>\n\t{$_(label)}\n</UploadButton>\n","export { default as Component } from \"./UploadButton.svelte\";\nexport const modes = [\"static\"];\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;4BA2ES;;8CAIE,WAAe,cAAc;mEACtB,WAAe,eAAe,MAAS;6DAC1C,WAAe,eAAe,MAAS;0EAMzB,eAC1B;yBACE;uCAHY;;;AAbjB;;;AAWA;;;;;;;kCANY;kCAOD;;;;;;;8BAVF;;oFAIE,YAAe,cAAc;;;kGACtB,YAAe,eAAe;;;4FACjC,YAAe,eAAe;;;;;;;;0GAMhB,gBAC1B;;;;2BACE;;;yCAHY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAhFL;QACA,UAAkB;QAClB,UAAmB;QACnB,OAAoB;QACpB;QACA,cAA6B,MAAM;QACnC,wBAAwB;MAI/B;QACE,WAAW;MACb,oBAAoB;;AAEvB,eAAW,QAAS,0BAAU,qBAAqB,OAAO,MAAM;WACxD;QACJ,eAAe;AAClB,eAAS,SAAS,kCAAkC;AAAA;YAE9C;AAAA;;QAIF;AACL,kBAAc;;QAGT,YAAa;QACd,SAAsB,MAAM,KAAK,KAAK;SACrC,MAAM,WAAW,OAAO;;;QAGzB,eAAe;AAClB,gBAAU,MAAM;;QAEb;AACJ,WAAO,SAAS,GAAG;UACd,gBAAgB;AACpB,gBAAU,cAAc,CAAC;AACzB,gBAAU;AACT,sBAAc,KAAK;UAEhB,MAAM,EAAE;AAAA,UACR,MAAM,EAAE;AAAA,UACR,MAAM,KAAK;AAAA,YAEV,KAAK;YAER,cAAc,OAAQ,OAAM,MAAM,MAAS,EAAE,WAAW,MAAM;AAE9D,mBACC,QACA,cAAc,WAAW,cAAc,KAAK,aAAa;AAAA;;;;QAOxD,sBAAuB;UACtB,SAAS,EAAE;SAEZ,OAAO;;AACZ,cAAU,OAAO,KAAK;AAAA;;;AAQZ;;;;;;;;;;;;;;;;;;;;;;;;wBA/DL,YAAY,WAAW,QAAQ,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBCuBhD,OAAG;;;;;;;;;;+CAAH,QAAG;;;;;;;;;;;;;;;;;;;;;;;;2BAFK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA5BE;QACA,UAAkB;QAClB,UAAmB;QACnB;QACA;QACA;QACA,cAA6B,MAAM;iCAEf;oBAC9B,QAAQ,MAAM;UACR;AACN,aAAS,UAAU,KAAK;AACxB,aAAS,UAAU,MAAM;AAAA;QAGpB,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCrBL,QAAQ,CAAC,QAAQ;;"}